# Memory Pipeline - Production Environment Configuration

# ================================
# API Configuration
# ================================
API_VERSION=1.0.0
LOG_LEVEL=INFO
DEBUG=false
CORS_ORIGINS=["http://localhost:3000", "https://yourdomain.com"]

# ================================
# PostgreSQL AWS RDS Configuration
# ================================
# Main database connection
DATABASE_URL=postgresql://username:password@your-rds-endpoint.region.rds.amazonaws.com:5432/memory_pipeline

# Connection pool settings for high performance
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Connection retry settings
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1.0

# Query timeout settings
DB_STATEMENT_TIMEOUT=30000  # 30 seconds
DB_CONNECT_TIMEOUT=10

# Optional: Application database user (if using separate user)
DB_APP_USER=memory_app
DB_APP_PASSWORD=your_secure_app_password

# Create application user during setup
CREATE_APP_USER=true

# ================================
# ChromaDB Cloud Configuration
# ================================
# ChromaDB Cloud API credentials
CHROMA_API_KEY=your_chromadb_api_key_here
CHROMA_API_URL=https://api.trychroma.com
CHROMA_TENANT=your_tenant_id
CHROMA_DATABASE=memory_pipeline

# Collection settings
CHROMA_COLLECTION_NAME=memories
CHROMA_BATCH_SIZE=100
CHROMA_MAX_RETRIES=3
CHROMA_TIMEOUT=30

# Embedding model configuration
CHROMA_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
CHROMA_EMBEDDING_DIMENSION=384

# ================================
# LLM API Configuration
# ================================
# Google Gemini API
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-1.5-flash
GEMINI_MAX_RETRIES=3
GEMINI_TIMEOUT=30

# Alternative: OpenAI API (if using)
# OPENAI_API_KEY=your_openai_api_key_here
# OPENAI_MODEL=gpt-4o-mini

# ================================
# RAG Configuration
# ================================
# Quality thresholds
DEFAULT_RELEVANCE_THRESHOLD=0.75
MIN_CONFIDENCE_SCORE=0.6
MAX_MEMORIES_PER_QUERY=10

# Feature toggles
ENABLE_CONTEXT_FILTERING=true
ENABLE_DEDUPLICATION=true
ENABLE_RELEVANCE_VALIDATION=true
ENABLE_SMART_SUMMARIZATION=true

# Performance settings
TOKEN_BUDGET_PER_RETRIEVAL=500
MAX_CONTENT_LENGTH=2000
RETRIEVAL_TIMEOUT_MS=5000

# ================================
# Caching Configuration
# ================================
# Redis for caching (optional but recommended for production)
REDIS_URL=redis://your-redis-instance:6379/0
REDIS_TTL=3600
ENABLE_REDIS_CACHE=true

# Local caching fallback
ENABLE_MEMORY_CACHE=true
MEMORY_CACHE_SIZE=1000
MEMORY_CACHE_TTL=300

# ================================
# Security Configuration
# ================================
# JWT settings (if implementing authentication)
JWT_SECRET_KEY=your_super_secret_jwt_key_here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# API rate limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=10

# CORS settings
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOW_HEADERS=["*"]

# ================================
# Monitoring and Observability
# ================================
# Application monitoring
ENABLE_METRICS=true
METRICS_ENDPOINT=/metrics
HEALTH_CHECK_ENDPOINT=/health

# Logging configuration
LOG_FORMAT=json
LOG_FILE=logs/memory-pipeline.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# Performance monitoring
ENABLE_QUERY_LOGGING=true
SLOW_QUERY_THRESHOLD_MS=1000
ENABLE_PERFORMANCE_METRICS=true